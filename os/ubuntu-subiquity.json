{
    "builders": [
        {
            "boot_command": [
                "<enter><enter><f6><esc><wait> ",
                "autoinstall ds=nocloud-net;s=http://{{ .HTTPIP }}:{{ .HTTPPort }}/",
                "<enter>"
            ]
        }
    ],
    "provisioners": [
        {
            "type": "shell",
            "environment_vars": [
                "CLOUD_INIT={{user `cloud_init`}}",
                "ADMIN_USER={{user `admin_user`}}",
                "ADMIN_USER_AUTHORIZED_KEYS={{user `admin_user_authorized_keys`}}",
                "ADMIN_USER_PASSWORD={{user `admin_user_password`}}",
                "ADMIN_USER_SHELL={{user `admin_user_shell`}}",
                "APT_LISTBUGS_FRONTEND=none",
                "APT_LISTCHANGES_FRONTEND=none",
                "DEBIAN_FRONTEND=noninteractive",
                "VBOXGUEST={{user `guest_additions_mode`}}"
            ],
            "execute_command": "echo 'vagrant' | sudo -S sh -c '{{ .Vars }} {{ .Path }}'",
            "scripts": [
                "scripts/common/admin-user.sh",
                "scripts/common/vboxguest.sh",
                "scripts/common/cloud-init.sh",
                "scripts/common/sshd.sh",
                "scripts/ubuntu/cleanup.sh",
                "scripts/common/zerofree.sh",
                "scripts/common/lock-root-user.sh"
            ]
        }
    ],
    "variables": {
        "guest_os_type": "Ubuntu_64",
        "ssh_handshake_attempts": "1000",
        "ssh_username": "vagrant",
        "shutdown_command": "sudo shutdown -P now"
    }
}
