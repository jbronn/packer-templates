{
    "builders": [
        {
            "boot_command": [
                "{{user `guest_language`}}<enter><wait>",
                "1<enter><wait>",
                "1<enter><wait>",
                "0<enter><wait>",
                "{{user `zpool_name`}}<enter><enter><wait>",
                "{{user `vm_name`}}<wait><enter><wait><enter><wait>",
                "11<enter><wait>",
                "{{user `guest_timezone`}}<enter><wait>",
                "1<enter>",
                "<wait90s>",
                "<enter><wait>",
                "1<enter><wait>",
                "1<enter><wait>",
                "2<enter><wait>",
                "5<enter><wait>{{user `dns_domain`}}<enter><wait>",
                "6<enter><wait>{{user `dns_server`}}<enter><wait>",
                "7<enter><wait>",
                "3<enter><wait>",
                "{{user `admin_user_password`}}<enter><wait>",
                "{{user `admin_user_password`}}<enter><wait>",
                "<enter><wait>",
                "4<enter><wait>",
                "5<enter><wait>",
                "6<enter><wait>",
                "2<enter><wait>",
                "sed -i -e 's~^PermitRootLogin no~PermitRootLogin yes~g' /mnt/etc/ssh/sshd_config<enter><wait>",
                "cp /mnt/etc/nsswitch.dns /mnt/etc/nsswitch.conf<enter><wait>",
                "exit<enter><wait>",
                "3<enter><wait>"

            ],
            "ssh_username": "root",
            "ssh_password": "{{user `admin_user_password`}}"
        }
    ],
    "provisioners": [
        {
            "type": "shell",
            "environment_vars": [
                "ADMIN_GROUP={{user `admin_group`}}",
                "ADMIN_USER={{user `admin_user`}}",
                "ADMIN_USER_AUTHORIZED_KEYS={{user `admin_user_authorized_keys`}}",
                "ADMIN_USER_HOME=/export/home/{{user `admin_user`}}",
                "ADMIN_USER_PASSWORD={{user `admin_user_password`}}",
                "ADMIN_USER_SHELL={{user `admin_user_shell`}}"
            ],
            "scripts": [
                "scripts/common/admin-user.sh",
                "scripts/common/sshd.sh",
                "scripts/common/rsync.sh"
            ]
        }
    ],
    "variables": {
        "admin_group": "staff",
        "admin_shell": "/usr/bin/bash",
        "boot_wait": "45s",
        "dns_domain": "domain.local",
        "dns_server": "10.0.2.3",
        "guest_additions_mode": "disable",
        "guest_language": "47",
        "guest_os_type": "Solaris11_64",
        "memsize": "1536",
        "nictype": "82545EM",
        "shutdown_command": "/usr/sbin/poweroff",
        "zpool_name": "rpool"
    }
}
